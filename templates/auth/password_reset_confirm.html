{% extends 'base.html' %}

{% block content %}
<section class="py-5" style="background: linear-gradient(135deg, rgba(80,92,78,0.08) 0%, rgba(255,198,40,0.12) 100%);">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-md-8 col-lg-6">
        <div class="card shadow-sm" style="border-left: 6px solid #df1d2e;">
          <div class="card-body p-4">
            <h1 class="h3 fw-bold mb-2" style="color:#df1d2e;">Restablecer contraseña</h1>

            {% if validlink %}
              <p class="text-muted mb-4">Ingresá tu nueva contraseña.</p>

              {% if form.non_field_errors %}
                <div class="alert alert-danger">{{ form.non_field_errors }}</div>
              {% endif %}

              <form method="post" novalidate>
                {% csrf_token %}

                <div class="mb-3">
                  <label class="form-label fw-bold">{{ form.new_password1.label }}</label>
                  <input
                    type="password"
                    name="new_password1"
                    autocomplete="new-password"
                    class="form-control"
                    required
                    id="id_new_password1"
                  >
                  {% if form.new_password1.errors %}
                    <div class="text-danger small">{{ form.new_password1.errors.0 }}</div>
                  {% endif %}
                </div>

                <div class="mb-3">
                  <label class="form-label fw-bold">{{ form.new_password2.label }}</label>
                  <input
                    type="password"
                    name="new_password2"
                    autocomplete="new-password"
                    class="form-control"
                    required
                    id="id_new_password2"
                  >
                  {% if form.new_password2.errors %}
                    <div class="text-danger small">{{ form.new_password2.errors.0 }}</div>
                  {% endif %}
                </div>

                <button type="submit" class="btn w-100 py-3" style="background:#ffc628; color:#2a2a2a; font-weight:700; border:2px solid rgba(223,29,46,0.65);">
                  Guardar contraseña
                </button>
              </form>
            {% else %}
              <div class="alert alert-warning mb-0">
                El enlace no es válido o ya expiró. Por favor solicitá uno nuevo.
              </div>
              <div class="text-center mt-3">
                <a href="{% url 'landing:password_reset' %}" class="small" style="color:#df1d2e; text-decoration: underline;">Solicitar nuevo enlace</a>
              </div>
            {% endif %}
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
{% endblock %}
